<html>
	<head>
        <meta name="author" lang="fr" content="seth37">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<style>
			@font-face {
			font-family: 'xian';
			src: url('QUIQRX+Xiinthlea-Regular.TTF') format('truetype');
			}
			body
			{
				text-align: center;
			}
			textarea
			{
				width: 50%;
				height: 300px;
				font-size:18px
			}

			#xian
			{
				 font-family: 'xian';
			}
		</style>
    </head>
	<body>
	<div >
		<h2>SRX</h2>
		<textarea id="srx" spellcheck="false"></textarea>
	</div>
	<div>
		<h2>Xi'an</h2>
		<textarea id="xian" spellcheck="false"></textarea>
	</div>
	<script>
	
	
	$("#srx").on("change paste keyup",function(){
	var text = $("#srx").val();
	$("#xian").val("");
	text = text.replace(/aa/g, "ā");
	text = text.replace(/AA/g, "Ā");
	text = text.replace(/āa/g, "â");
	text = text.replace(/oo/g, "ō");
	text = text.replace(/OO/g, "Ō");
	text = text.replace(/uu/g, "ū");
	text = text.replace(/UU/g, "Ū");
	text = text.replace(/ee/g, "ē");
	text = text.replace(/EE/g, "Ē");
	text = text.replace(/EE/g, "Ē");
	text = text.replace(/\'/g, "’");
	text = text.replace(/\"/g, "”");
	$("#srx").val(text);
	var xian_0 = text;
	xian_0 = xian_0.replace(/\n/g, " \n ");
	var text_array = xian_0.split(" ");
	var xian = "";
	
	
	
	text_array.forEach(function(word_xian) {
	
	clear_xian = word_xian.replace(/[.’”]/gi, '')
		
	text_xian = clear_xian
	
	text_xian = text_xian.replace(/A/g, "@a");
	text_xian = text_xian.replace(/Ā/g, "@ā");
	text_xian = text_xian.replace(/O/g, "@o");
	text_xian = text_xian.replace(/Ō/g, "@ō");
	text_xian = text_xian.replace(/U/g, "@u");
	text_xian = text_xian.replace(/Ū/g, "@ū");
	text_xian = text_xian.replace(/E/g, "@e");
	text_xian = text_xian.replace(/Ē/g, "@ē");
	text_xian = text_xian.replace(/I/g, "@i");
	text_xian = text_xian.replace(/Y/g, "@y");
	text_xian = text_xian.replace(/P/g, "@p");
	text_xian = text_xian.replace(/K/g, "@k");
	text_xian = text_xian.replace(/T/g, "@t");
	text_xian = text_xian.replace(/S/g, "@s");
	text_xian = text_xian.replace(/H/g, "@h");
	text_xian = text_xian.replace(/M/g, "@m");
	text_xian = text_xian.replace(/N/g, "@n");
	text_xian = text_xian.replace(/L/g, "@l");
	text_xian = text_xian.replace(/R/g, "@r");
	text_xian = text_xian.replace(/X/g, "@x");
	text_xian = text_xian.replace(/C/g, "@c");
	
	text_xian = text_xian.replace(/â/g, "%");
		
	text_xian = text_xian.replace(/uii/g, "Ï");
	text_xian = text_xian.replace(/uao/g, "ẅ");
	text_xian = text_xian.replace(/uāo/g, "Ẅ");
	text_xian = text_xian.replace(/uoa/g, "ø");
	text_xian = text_xian.replace(/uōa/g, "Ø");
	text_xian = text_xian.replace(/uai/g, "ÿ");
	text_xian = text_xian.replace(/uāi /g, "Ÿ");
	text_xian = text_xian.replace(/uea/g, "ùĕ");
	text_xian = text_xian.replace(/uth/g, "&");
	text_xian = text_xian.replace(/e’e/g, "ė’ ");
	text_xian = text_xian.replace(/yii/g, "Ĩ");
	text_xian = text_xian.replace(/yao/g, "z");
	text_xian = text_xian.replace(/yāo/g, "Z");
		text_xian = text_xian.replace(/yoa/g, "b");
	text_xian = text_xian.replace(/yōa/g, "C");
	text_xian = text_xian.replace(/yai/g, "ỹ");
	text_xian = text_xian.replace(/yāi/g, "Ỹ");
	text_xian = text_xian.replace(/yea/g, "jĕ");
	text_xian = text_xian.replace(/thl/g, "ð");
	
	text_xian = text_xian.replace(/ii/g, "I");	
	text_xian = text_xian.replace(/ao/g, "w");
	text_xian = text_xian.replace(/āo/g, "W");
	text_xian = text_xian.replace(/oa/g, "ő");
	text_xian = text_xian.replace(/ōa/g, "Ő");
		text_xian = text_xian.replace(/ai/g, "f");
	text_xian = text_xian.replace(/āi/g, "Y");
	text_xian = text_xian.replace(/ae/g, "ě");
	text_xian = text_xian.replace(/ua/g, "ä");
	text_xian = text_xian.replace(/uā/g, "Ä");
	text_xian = text_xian.replace(/uo/g, "ö");
	text_xian = text_xian.replace(/uō/g, "Ö");
	text_xian = text_xian.replace(/vu/g, "v");
	text_xian = text_xian.replace(/ue/g, "ë");
	text_xian = text_xian.replace(/uē/g, "Ë");
	text_xian = text_xian.replace(/ui/g, "ï");
	text_xian = text_xian.replace(/ya/g, "ã");
	text_xian = text_xian.replace(/yā/g, "Ã");
	text_xian = text_xian.replace(/yo/g, "õ");
	text_xian = text_xian.replace(/yō/g, "Õ");
	text_xian = text_xian.replace(/yu/g, "ũ");
	text_xian = text_xian.replace(/yū/g, "Ũ")
	text_xian = text_xian.replace(/ye/g, "ẽ");
	text_xian = text_xian.replace(/yē/g, "Ẽ");
	text_xian = text_xian.replace(/yi/g, "ĩ");
	text_xian = text_xian.replace(/ng/g, "g");
	text_xian = text_xian.replace(/th/g, "þ");
	text_xian = text_xian.replace(/xy/g, "X");
	text_xian = text_xian.replace(/ch/g, "ç");
		text_xian = text_xian.replace(/b/g, "c");
	text_xian = text_xian.replace(/kl/g, "ļ");
	text_xian = text_xian.replace(/kr/g, "ŗ");
	
	text_xian = text_xian.replace(/ā/g, "A");
	text_xian = text_xian.replace(/ō/g, "O");
	text_xian = text_xian.replace(/ū/g, "U");
	text_xian = text_xian.replace(/ē/g, "E");
	text_xian = text_xian.replace(/y/g, "j");
		text_xian = text_xian.replace(/f/g, "y");
	
	var l = text_xian.length;
	var cvn = text_xian;
	
	cvn = cvn.replace(/ùĕ/g, "??");
	cvn = cvn.replace(/jĕ/g, "??");
	
	cvn = cvn.replace(/[ÏẅẄøØÿuYĨzZcCỹỸIwWőŐyYěäÄöÖvUëËïãÃõÕũŨẽẼĩAOUEaouei]/g, "v");
	cvn = cvn.replace(/[ŗļçXþgðpktshmnj]/g, "c");
	cvn = cvn.replace(/[?&ė]/g, "n");
	
	alert(cvn);
	
	if (l!=2){
	for ( i = l; i>0 ; i--) {
		
	
		
	
	}
	}
	
	xian = xian + text_xian;

	});

	$("#xian").val(xian);
	});
	
	



	</script>
	</body>
<html>